<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Th·ªëng K√™ Doanh Thu Chuy√™n Nghi·ªáp</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chart.js/3.7.1/chart.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-gradient@0.1.0/dist/chartjs-plugin-gradient.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    
    <style>
        :root {
            --primary-color: #3B82F6;
            --secondary-color: #10B981;
            --background-light: #F3F4F6;
            --card-background: #FFFFFF;
        }
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: var(--background-light);
            line-height: 1.6;
        }
        .dashboard-card {
            border-radius: 12px;
            border: none;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }
        .dashboard-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.15);
        }
        .stat-card {
            background: linear-gradient(135deg, var(--primary-color), #6366F1);
            color: white;
            border-radius: 10px;
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .stat-icon {
            font-size: 2.5rem;
            opacity: 0.7;
        }
        .filter-container {
            background-color: var(--card-background);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.08);
        }
        .select2-container {
            width: 100% !important;
        }
        .chart-container {
            position: relative;
            height: 350px;
        }
          * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f4f4f7;
            line-height: 1.6;
        }
        .revenue-dashboard {
            max-width: 1200px;
            margin: 30px auto;
            background-color: white;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
        }
        .tabs {
            display: flex;
            background-color: #007bff;
            color: white;
        }
        .tab {
            flex: 1;
            padding: 15px 20px;
            text-align: center;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .tab:hover {
            background-color: #0056b3;
        }
        .tab.active {
            background-color: #0056b3;
            font-weight: bold;
        }
        .tab-content {
            display: none;
            padding: 20px;
        }
        .tab-content.active {
            display: block;
        }
         /* ƒê·ªãnh d·∫°ng b·∫£ng v√† thanh cu·ªôn */
        .table-container {
            max-height: 400px; /* ƒê·∫∑t chi·ªÅu cao t·ªëi ƒëa cho b·∫£ng */
            overflow-y: auto;  /* Cho ph√©p thanh cu·ªôn d·ªçc khi c√≥ qu√° nhi·ªÅu d√≤ng */
            border: 1px solid #ddd; /* ƒê·∫∑t ƒë∆∞·ªùng vi·ªÅn quanh b·∫£ng */
            margin-bottom: 20px; /* Kho·∫£ng c√°ch d∆∞·ªõi c√πng */
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        th {
            background-color: #f8f9fa;
            font-weight: bold;
        }
        tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        tr:hover {
            background-color: #e9ecef;
        }
        
#resetButton i {
    font-size: 16px; /* T√πy ch·ªânh k√≠ch th∆∞·ªõc bi·ªÉu t∆∞·ª£ng */
}

#resetButton:hover {
    background-color: #d32f2f;
}
        /* Header Th·ªëng k√™ doanh thu */
.header-revenue-statistics {
    background: linear-gradient(135deg, #34D399, #10B981); /* Gradient t·ª´ xanh l√° s√°ng (#34D399) ƒë·∫øn xanh l√° ƒë·∫≠m (#10B981) */
    color: #fff; /* M√†u ch·ªØ tr·∫Øng n·ªïi b·∫≠t */
    padding: 2rem;
    border-radius: 0 0 20px 20px; /* Bo g√≥c ƒë√°y */
    margin-bottom: 2rem;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.15); /* Hi·ªáu ·ª©ng ƒë·ªï b√≥ng nh·∫π */
    position: relative;
    overflow: hidden;
}

/* Hi·ªáu ·ª©ng n·ªÅn ƒë·ªông */
.header-revenue-statistics::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(45deg, 
        rgba(255, 255, 255, 0.3) 25%, 
        transparent 25%, 
        transparent 50%, 
        rgba(255, 255, 255, 0.3) 50%, 
        rgba(255, 255, 255, 0.3) 75%, 
        transparent 75%, 
        transparent);
    background-size: 60px 60px;
    animation: moveStripes 3s linear infinite; /* Hi·ªáu ·ª©ng di chuy·ªÉn */
    opacity: 0.2; /* ƒê·ªô m·ªù */
}

/* Animation cho hi·ªáu ·ª©ng n·ªÅn */
@keyframes moveStripes {
    0% {
        background-position: 0 0;
    }
    100% {
        background-position: 60px 60px;
    }
}


    </style>
</head>
<body>
    <!-- Header -->
    <div th:replace="~{manager/header}"></div> 
    <!-- Header c·ªßa trang Th·ªëng k√™ doanh thu -->
<div class="page-header text-center header-revenue-statistics">
    <h1><i class="fas fa-chart-line me-2"></i>Th·ªëng K√™ Doanh Thu</h1>
    <p class="lead">T·ªïng h·ª£p v√† ph√¢n t√≠ch doanh thu theo th·ªùi gian,ph√¢n lo·∫°i v√† s·∫£n ph·∫©m b√°n ch·∫°y</p>
    <!-- Hi·ªÉn th·ªã t√™n th∆∞∆°ng hi·ªáu -->
	 <div class="brand-info" style="color: black; align-items: center">
	    <strong>
	        <i class="fas fa-cogs"></i> <!-- Th√™m icon cogs t·ª´ Font Awesome -->
	        Th∆∞∆°ng hi·ªáu qu·∫£n l√Ω: 
	    </strong>
	    <span th:text="${brand}"></span>
	</div>
</div>
        <!-- V√≠ d·ª• v·ªõi Thymeleaf -->
<div class="revenue-dashboard">
<p class="lead" style="color: #007bff; font-weight: bold; font-size: 1.2em;">
    <i class="fas fa-file-alt" style="color: #ff5722; margin-right: 8px;"></i> 
    B√ÅO C√ÅO DOANH THU CHI TI·∫æT
</p>

        <div class="tabs">
            <div class="tab active" onclick="showTab('weekly')">Doanh Thu Theo Tu·∫ßn</div>
            <div class="tab" onclick="showTab('monthly')">Doanh Thu Theo Th√°ng</div>
            <div class="tab" onclick="showTab('quarterly')">Doanh Thu Theo Qu√Ω</div>
            <div class="tab" onclick="showTab('yearly')">Doanh Thu Theo NƒÉm</div>
        </div>
        
       <!-- Combobox ch·ªçn nƒÉm -->
<div class="filter-year">
    
    <select id="year" name="year" onchange="filterDataByYear()">
        <option value="" disabled selected>Ch·ªçn NƒÉm</option>
        <!-- C√°c nƒÉm s·∫Ω ƒë∆∞·ª£c th√™m v√†o ·ªü ƒë√¢y -->
    </select>
   <button id="resetButton" onclick="resetData()" title="Reset">
    <i class="fas fa-undo-alt"></i>
</button>


    
</div>

        <div id="weekly" class="tab-content active">
         <div class="table-container">
            <table>
                <tr>
                    <th>Tu·∫ßn</th>
                    <th>NƒÉm</th>
                    <th>Lo·∫°i S·∫£n Ph·∫©m</th>
                    <th>Doanh Thu</th>
                </tr>
                <tbody id="weeklyTable">
             
                   <th:block th:each="revenue : ${weeklyRevenue}">
	            <tr>
	                <td th:text="${revenue.period}"></td>
	                <td th:text="${revenue.year}"></td>
	                <td th:text="${revenue.kind}"></td>
	                <td th:text="${revenue.totalRevenue}"></td>
	            </tr>
	        </th:block>
	        </tbody>

                
            </table>
            </div>
        </div>

        <div id="monthly" class="tab-content">
          <div class="table-container">
            <table>
                <tr>
                    <th>Th√°ng</th>
                    <th>NƒÉm</th>
                    <th>Lo·∫°i S·∫£n Ph·∫©m</th>
                    <th>Doanh Thu</th>
                </tr>
                <tbody id="monthlyTable">
                <th:block th:each="revenue : ${monthlyRevenue}">
	            <tr>
	                <td th:text="${revenue.period}"></td>
	                <td th:text="${revenue.year}"></td>
	                <td th:text="${revenue.kind}"></td>
	                <td th:text="${revenue.totalRevenue}"></td>
	            </tr>
	        </th:block>
</tbody>
            </table>
        </div>
</div>
        <div id="quarterly" class="tab-content">
         <div class="table-container">
            <table>
                <tr>
                    <th>Qu√Ω</th>
                    <th>NƒÉm</th>
                    <th>Lo·∫°i S·∫£n Ph·∫©m</th>
                    <th>Doanh Thu</th>
                </tr>
                <tbody id="quarterlyTable">
               <th:block th:each="revenue : ${quarterlyRevenue}">
	            <tr>
	                <td th:text="${revenue.period}"></td>
	                <td th:text="${revenue.year}"></td>
	                <td th:text="${revenue.kind}"></td>
	                <td th:text="${revenue.totalRevenue}"></td>
	            </tr>
	        </th:block>
	         </tbody>

            </table>
        </div>
        </div>

        <div id="yearly" class="tab-content">
        <div class="table-container">
            <table>
                <tr>
                    <th>NƒÉm</th>
                     <th>NƒÉm</th>
                    <th>Lo·∫°i S·∫£n Ph·∫©m</th>
                    <th>Doanh Thu</th>
                </tr>
                <tbody id="yearlyTable">
               <th:block th:each="revenue : ${yearlyRevenue}">
	            <tr>
	                
	                <td th:text="${revenue.period}"></td>
	                <td th:text="${revenue.year}"></td>
	                <td th:text="${revenue.kind}"></td>
	                <td th:text="${revenue.totalRevenue}"></td>
	            </tr>
	        </th:block>
	         </tbody>

            </table>
            </div>
        </div>
       
  </div>
  
  
<div class="revenue-dashboard">
    <p class="lead" style="color: #007bff; font-weight: bold; font-size: 1.2em;">
        <i class="fas fa-chart-bar" style="color: #28a745; margin-right: 8px;"></i> 
        BI·ªÇU ƒê·ªí TH·ªêNG K√ä DOANH THU
    </p>
    
    <div class="row g-4">
        <!-- Filters -->
        <div class="col-lg-4">
            <div class="filter-container">
                <h3 class="mb-4 text-center">B·ªô L·ªçc Th√¥ng Minh</h3>
                <!-- Ch·ªçn NƒÉm -->
                <div class="mb-3">
                    <label class="form-label">Ch·ªçn NƒÉm</label>
                    <select id="yearFilter" class="form-select">
                        <!-- C√°c nƒÉm s·∫Ω ƒë∆∞·ª£c th√™m qua JavaScript -->
                    </select>
                </div>

                <div class="mb-3">
                    <label class="form-label">Ph√¢n Lo·∫°i Th·ªùi Gian</label>
                    <select id="timeFilter" class="form-select">
                        <option value="week">Theo Tu·∫ßn</option>
                        <option value="month">Theo Th√°ng</option>
                        <option value="quarter">Theo Qu√Ω</option>
                        <option value="year">Theo NƒÉm</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Statistics -->
        <div class="col-lg-8">
            <div class="row g-4">
                <!-- Total Revenue Card -->
                <div class="col-md-6">
                    <div class="stat-card">
                        <div>
                            <h5 class="mb-2">T·ªïng Doanh Thu</h5>
                            <h3 id="totalRevenue" class="mb-0">0 ƒë</h3>
                        </div>
                        <i class="stat-icon">üí∞</i>
                    </div>
                </div>
                <!-- Revenue Growth Card -->
                <div class="col-md-6">
                    <div class="stat-card" style="background: linear-gradient(135deg, #10B981, #34D399);">
                        <div>
                            <h5 class="mb-2">TƒÉng Tr∆∞·ªüng</h5>
                            <h3 id="revenueGrowth" class="mb-0">0%</h3>
                        </div>
                        <i class="stat-icon">üìà</i>
                    </div>
                </div>

                <!-- Charts Section -->
                <div class="col-md-6">
                    <div class="card dashboard-card h-100">
                        <div class="card-body">
                            <h5 class="card-title text-center mb-4">Bi·ªÉu ƒê·ªì Doanh Thu</h5>
                            <div class="chart-container">
                                <canvas id="revenueChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card dashboard-card h-100">
                        <div class="card-body">
                            <h5 class="card-title text-center mb-4">Ph√¢n B·ªï Doanh Thu</h5>
                            <div class="chart-container">
                                <canvas id="revenuePieChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>




        

      
<script th:inline="javascript">
    // Truy·ªÅn d·ªØ li·ªáu t·ª´ Spring v√†o JavaScript qua Thymeleaf
    const weeklyRevenue = /*[[${weeklyRevenue}]]*/[];
    const monthlyRevenue = /*[[${monthlyRevenue}]]*/ [];
    const quarterlyRevenue = /*[[${quarterlyRevenue}]]*/ [];
    const yearlyRevenue = /*[[${yearlyRevenue}]]*/ [];
 // Add this at the beginning of your script
    console.log('Weekly Revenue:', weeklyRevenue);
    console.log('Monthly Revenue:', monthlyRevenue);
    console.log('Quarterly Revenue:', quarterlyRevenue);
    console.log('Yearly Revenue:', yearlyRevenue);

 
</script>
<!-- Th√™m Chart.js tr∆∞·ªõc c√°c ƒëo·∫°n m√£ JavaScript c·ªßa b·∫°n -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script >

//Th√™m danh s√°ch c√°c nƒÉm t·ª´ d·ªØ li·ªáu c√≥ s·∫µn
const availableYears = [...new Set(yearlyRevenue.map(item => item.period))]; // L·∫•y c√°c nƒÉm t·ª´ yearlyRevenue
const yearSelect = document.getElementById('yearFilter');

//Th√™m c√°c nƒÉm v√†o dropdown
availableYears.forEach(year => {
    const option = document.createElement('option');
    option.value = year;
    option.textContent = year;
    yearSelect.appendChild(option);
});

// Set nƒÉm m·∫∑c ƒë·ªãnh l√† nƒÉm hi·ªán t·∫°i ho·∫∑c m·ªôt nƒÉm trong danh s√°ch
const currentYear = new Date().getFullYear();
if (availableYears.includes(currentYear.toString())) {
    yearSelect.value = currentYear.toString();
} else {
    yearSelect.value = availableYears[0]; // Ch·ªçn nƒÉm ƒë·∫ßu ti√™n n·∫øu nƒÉm hi·ªán t·∫°i kh√¥ng c√≥ trong danh s√°ch
}

// H√†m format currency
function formatCurrency(amount) {
    return new Intl.NumberFormat('vi-VN', { 
        style: 'currency', 
        currency: 'VND' 
    }).format(amount);
}

// H√†m l·ªçc d·ªØ li·ªáu theo nƒÉm v√† lo·∫°i th·ªùi gian
function filterRevenueData(timeFilter, selectedYear) {
    let filteredData = [];

    switch(timeFilter) {
        case 'week':
            filteredData = weeklyRevenue.filter(item => {
                let period = String(item.period);  // Chuy·ªÉn period th√†nh chu·ªói n·∫øu c·∫ßn thi·∫øt
                let year = String(item.year);
                return year==selectedYear;  // Sau ƒë√≥ d√πng startsWith
            }).map(item => ({ period: `Tu·∫ßn ${item.period}`, revenue: item.totalRevenue  }));
            break;
        case 'month':
            filteredData = monthlyRevenue.filter(item => {
                let period = String(item.period);  // Chuy·ªÉn period th√†nh chu·ªói n·∫øu c·∫ßn thi·∫øt
                let year = String(item.year);
                return year==selectedYear;  // Sau ƒë√≥ d√πng startsWith
            }).map(item => ({ period: `Th√°ng ${item.period}`, revenue: item.totalRevenue  }));
            break;
        case 'quarter':
            filteredData = quarterlyRevenue.filter(item => {
                let period = String(item.period);  // Chuy·ªÉn period th√†nh chu·ªói n·∫øu c·∫ßn thi·∫øt
                let year = String(item.year);
                return year==selectedYear;  // Sau ƒë√≥ d√πng startsWith
            }).map(item => ({ period: `Qu√Ω ${item.period}`, revenue: item.totalRevenue  }));
            break;
        case 'year':
            filteredData = yearlyRevenue.filter(item => {
                let period = String(item.period);  // Chuy·ªÉn period th√†nh chu·ªói n·∫øu c·∫ßn thi·∫øt
                return period === selectedYear;  // Ki·ªÉm tra xem period c√≥ kh·ªõp v·ªõi selectedYear kh√¥ng
            }).map(item => ({ 
                period: item.period, 
                revenue: item.totalRevenue 
            }));
            break;
    }

    return filteredData;
}

let revenueChart, revenuePieChart;

// H√†m c·∫≠p nh·∫≠t dashboard
function updateDashboard() {
    const timeFilter = document.getElementById('timeFilter').value;
    const selectedYear = document.getElementById('yearFilter').value;
    
    // L·ªçc d·ªØ li·ªáu theo nƒÉm v√† lo·∫°i th·ªùi gian
    const data = filterRevenueData(timeFilter, selectedYear);

    // Revenue Line Chart with Gradient
    if (revenueChart) revenueChart.destroy();
    revenueChart = new Chart(document.getElementById('revenueChart'), {
        type: 'line',
        data: {
            labels: data.map(item => item.period),
            datasets: [{
                label: 'Doanh Thu',
                data: data.map(item => item.revenue),
                borderColor: 'var(--primary-color)',
                backgroundColor: 'rgba(59, 130, 246, 0.1)',
                fill: true,
                tension: 0.4,
                borderWidth: 3
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: { display: false },
                tooltip: {
                    mode: 'index',
                    intersect: false,
                    callbacks: {
                        label: function(tooltipItem) {
                            return `${tooltipItem.label}: ${formatCurrency(tooltipItem.raw)}`;
                        }
                    }
                }
            },
            scales: {
                y: {
                    beginAtZero: true,
                    grid: {
                        color: 'rgba(0,0,0,0.05)'
                    }
                }
            }
        }
    });

    // Revenue Pie Chart with Improved Styling
    if (revenuePieChart) revenuePieChart.destroy();
    revenuePieChart = new Chart(document.getElementById('revenuePieChart'), {
        type: 'pie',
        data: {
            labels: data.map(item => item.period),
            datasets: [{
                data: data.map(item => item.revenue),
                backgroundColor: [
                    'rgba(59, 130, 246, 0.8)',   // Primary Blue
                    'rgba(16, 185, 129, 0.8)',   // Green
                    'rgba(245, 158, 11, 0.8)',   // Amber
                    'rgba(139, 92, 246, 0.8)',   // Purple
                    'rgba(255, 99, 132, 0.8)',   // Red
                    'rgba(54, 162, 235, 0.8)',   // Blue
                    'rgba(255, 206, 86, 0.8)',   // Yellow
                ],
                borderColor: 'rgba(255, 255, 255, 0.5)',
                borderWidth: 2
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: { position: 'top' },
                tooltip: {
                    callbacks: {
                        label: function(tooltipItem) {
                            return `${tooltipItem.label}: ${formatCurrency(tooltipItem.raw)}`;
                        }
                    }
                }
            }
        }
    });

    // C·∫≠p nh·∫≠t t·ªïng doanh thu v√† tƒÉng tr∆∞·ªüng
    const totalRevenue = data.reduce((acc, item) => acc + item.revenue, 0);
    const growthPercentage = ((data[data.length - 1].revenue - data[0].revenue) / data[0].revenue * 100).toFixed(2);

    document.getElementById('totalRevenue').textContent = formatCurrency(totalRevenue);
    document.getElementById('revenueGrowth').textContent = `${growthPercentage}%`;
}
//Event Listeners
document.getElementById('timeFilter').addEventListener('change', updateDashboard);
document.getElementById('yearFilter').addEventListener('change', updateDashboard);



updateDashboard(); // Kh·ªüi t·∫°o khi trang t·∫£i
document.addEventListener('DOMContentLoaded', function () {
    updateDashboard(); // G·ªçi h√†m c·∫≠p nh·∫≠t sau khi trang ƒë√£ t·∫£i xong
});



   </script>
<script>
function resetData() {
    // X√≥a l·ª±a ch·ªçn c·ªßa combobox
    const yearDropdown = document.getElementById('year');
    yearDropdown.value = "";

    // Hi·ªÉn th·ªã l·∫°i to√†n b·ªô d·ªØ li·ªáu ban ƒë·∫ßu
    displayDataInTable('weekly', weeklyRevenue);
    displayDataInTable('monthly', monthlyRevenue);
    displayDataInTable('quarterly', quarterlyRevenue);
    displayDataInTable('yearly', yearlyRevenue);

    console.log("ƒê√£ reset d·ªØ li·ªáu v·ªÅ tr·∫°ng th√°i ban ƒë·∫ßu.");
}

//H√†m ƒë·ªÉ t√≠nh to√°n v√† ƒëi·ªÅn c√°c nƒÉm t·ª´ nƒÉm hi·ªán t·∫°i tr·ªü v·ªÅ tr∆∞·ªõc v√†o combobox
function populateYearDropdown() {
    const currentYear = new Date().getFullYear();  // L·∫•y nƒÉm hi·ªán t·∫°i
    const yearDropdown = document.getElementById('year');
    
    // Ch·ªâ th√™m c√°c nƒÉm t·ª´ hi·ªán t·∫°i tr·ªü v·ªÅ tr∆∞·ªõc (v√≠ d·ª•: 2024, 2023, 2022,...)
    for (let year = currentYear; year >= 2000; year--) {
        const option = document.createElement('option');
        option.value = year;
        option.textContent = year;
        yearDropdown.appendChild(option);
    }
}

// H√†m ƒë·ªÉ l·ªçc v√† hi·ªÉn th·ªã d·ªØ li·ªáu theo nƒÉm ƒë√£ ch·ªçn
function filterDataByYear() {
	const selectedYear = document.getElementById('year').value; // L·∫•y nƒÉm ƒë√£ ch·ªçn
    console.log("ƒê√£ ch·ªçn nƒÉm:", selectedYear);

    // L·ªçc d·ªØ li·ªáu t·ª´ c√°c bi·∫øn ƒë√£ truy·ªÅn
    const filteredWeekly = weeklyRevenue.filter(item => item.year == selectedYear);
    const filteredMonthly = monthlyRevenue.filter(item => item.year == selectedYear);
    const filteredQuarterly = quarterlyRevenue.filter(item => item.year == selectedYear);
    const filteredYearly = yearlyRevenue.filter(item => item.year == selectedYear);

    // Hi·ªÉn th·ªã d·ªØ li·ªáu l√™n b·∫£ng
    displayDataInTable('weekly', filteredWeekly);
    displayDataInTable('monthly', filteredMonthly);
    displayDataInTable('quarterly', filteredQuarterly);
    displayDataInTable('yearly', filteredYearly);
}

// G·ªçi h√†m ƒë·ªÉ ƒëi·ªÅn combobox khi trang ƒë∆∞·ª£c t·∫£i
window.onload = function() {
    populateYearDropdown();
};
document.addEventListener('DOMContentLoaded', function() {
	    populateYearDropdown();
	});

   // H√†m ƒë·ªÉ hi·ªÉn th·ªã d·ªØ li·ªáu trong c√°c b·∫£ng
   function displayDataInTable(type, data) {
    const tableBody = document.getElementById(`${type}Table`);
    tableBody.innerHTML = ''; // X√≥a n·ªôi dung c≈©

    data.forEach(item => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
            <td>${item.period}</td>
            <td>${item.year}</td>
            <td>${item.kind}</td>
            <td>${item.totalRevenue}</td>
        `;
        tableBody.appendChild(tr);
    });
}


   // G·ªçi h√†m ƒë·ªÉ ƒëi·ªÅn combobox khi trang ƒë∆∞·ª£c t·∫£i
   window.onload = function() {
       populateYearDropdown();
   };
        function showTab(tabName) {
            // ·∫®n t·∫•t c·∫£ c√°c tab content
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach(content => {
                content.classList.remove('active');
            });

            // ·∫®n t·∫•t c·∫£ c√°c tab
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                tab.classList.remove('active');
            });

            // Hi·ªÉn th·ªã tab content ƒë∆∞·ª£c ch·ªçn
            document.getElementById(tabName).classList.add('active');
            
            // ƒê√°nh d·∫•u tab ƒëang ch·ªçn
            event.target.classList.add('active');
        }
    </script>
   
    <!-- Footer -->
    <div th:replace="~{manager/footer}"></div>
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    
</body>
</html>
