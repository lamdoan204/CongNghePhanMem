<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<title>Blog Form</title>
	<!-- Add Bootstrap CSS -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">
	<!-- Header -->
	<div th:replace="manager/header"></div>

	<div class="container mt-5">
		<div class="card shadow">
			<div class="card-header bg-success text-white">
				<h2 class="mb-0">Create Blog</h2>
			</div>
			<div class="card-body">
				<!-- Hướng đến đường dẫn create luôn -->
				<form th:action="@{/manager/blog/create}"
					method="post" th:object="${blog}" enctype="multipart/form-data">
					<input type="hidden" th:field="*{articleId}">
					<div class="mb-3">
						<label for="title" class="form-label">Title:</label>
						<input type="text" id="title" th:field="*{title}" class="form-control"
							placeholder="Enter blog title" required>
					</div>
					<div class="mb-3">
						<label for="content" class="form-label">Content:</label>
						<textarea id="content" th:field="*{content}" class="form-control" rows="5"
							placeholder="Enter blog content" required></textarea>
					</div>
					<div class="mb-3">
						<label for="orderDate" class="form-label">Date:</label>
						<input type="date" id="orderDate" th:field="*{orderDate}" class="form-control" required>
					</div>
					<!-- Add image upload field -->
					<div class="mb-3">
						<label for="image" class="form-label">Image:</label>
						<input type="file" id="image" name="image" class="form-control" accept="image/*">
						<!-- Preview image -->
						<div class="mt-2">
							<!-- Hiển thị ảnh hiện có nếu đang trong chế độ edit -->
							<img th:if="${blog.image != null}" th:src="@{${blog.image}}" id="imagePreview"
								alt="Current image" style="max-width: 200px;">
							<!-- Hiển thị preview cho ảnh mới -->
							<img th:if="${blog.image == null}" id="imagePreview" src="#" alt="Preview"
								style="max-width: 200px; display: none;">
						</div>
					</div>
					<div class="text-center">
						<button type="submit" class="btn btn-success">Save</button>
						<a href="/manager/blog" class="btn btn-secondary">Cancel</a>
					</div>
				</form>
			</div>
		</div>
	</div>

	<!-- Footer -->
	<div th:replace="manager/footer"></div>
	<!-- Add Bootstrap JS -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

	<!-- Add JavaScript for image preview -->
	<script>
		document.getElementById('image').onchange = function (evt) {
			const [file] = this.files;
			if (file) {
				const preview = document.getElementById('imagePreview');
				preview.src = URL.createObjectURL(file);
				preview.style.display = 'block';
			}
		};
	</script>
</body>

</html>
